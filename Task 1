-- # TASK-1 # --

-- CREATING DATABASE INVENTORY
CREATE DATABASE INVENTORY;
USE INVENTORY;

-- CREATING SUPPLIER TABLE
CREATE TABLE SUPPLIER(
  SID CHAR(5) PRIMARY,
  SNAME VARCHAR(20) NOT NULL,
  SADDR VARCHAR(60) NOT NULL,
  SCITY VARCHAR(20) DEFAULT('DELHI'),
  SPHONE CHAR(14) UNIQUE,
  SMAIL VARCHAR(50) UNIQUE CHECK(SEMAIL LIKE '%@%')
);

-- CREATING PRODUCT TABLE
CREATE TABLE PRODUCT(
  PID CHAR(5) PRIMARY KEY,
  PDESC VARCHAR(50) NOT NULL,
  PRICE MONEY CHECK(PRICE>0),
  CATEGORY VARCHAR(10) CHECK(CATEGORY IN ('IT','HA','HC'),
  SID CHAR(5) FOREIGN KEY REFERENCES SUPPLIER(SID) ON DELETE CASCADE ON UPDATE CASCADE
);

-- CREATING CUSTOMER TABLE
CREATE TABLE CUSTOMER(
  CID CHAR(5) PRIMARY KEY,
  CNAME VARCHAR(30) NOT NULL,
  CADDR VARCHAR(70) NOT NULL,
  CCITY VARCHAR(30) NOT NULL,
  CPHONE VARCHAR(14) NOT NULL,
  CEMAIL VARCHAR(50) NOT NULL CHECK(EMAIL LIKE '%@%'),
  DOB DATE CHECK (DOB < '01-01-2020')
);

-- CREATING ORDERS TABLE
CREATE TABLE ORDERS(
  OID CHAR(5) PRIMARY KEY,
  ODATE DATE,
  CID CHAR(5) FOREIGN KEY REFERENCES CUSTOMER(CID),
  PID CHAR(5) FOREIGN KEY REFERENCES PRODUCT(PID),
  OQTY INT CHECK (OQTY >= 1)
);

-- CREATING STOCK TABLE
CREATE TABLE STOCK(
  PID CHAR(5) FOREIGN KEY REFERENCES PRODUCT(PID) ON DELETE CASCADE ON UPDATE CASCADE,
  SQTY INT CHECK (SQTY >= 0),
  ROL INT CHECK (ROL > 0),
  MOQ INT CHECK (MOQ >= 5));

-- VIEWING ALL TABLES
SELECT * FROM SUPPLIER;
SELECT * FROM PRODUCT;
SELECT * FROM CUSTOMER;
SELECT * FROM ORDERS;
SELECT * FROM STOCK;
