/* 
- CREATE A FUNCTION FOR AUTOGENERATION OF 5 CHARACTERS ALPHA NUMERIC ID. IT SHOULD ACCEPT 2 PARAMETERS A CHARACTER AND THE NUMBER AND RETURN THE ID BY CONCANATING THE CHARACTER, REQUIRED ZEROS AND THE SPECIFIED NUMBER.
-CREATE BELOW PROCEDURES IN THE INVENTORY DATABASE AS SPECIFIED (ALL THE ID S SHOULD BE AUTOMATICALLY GENERATED USING ABOVE CREATED FUNCTION AND SEQUENCES):
ADDSUPPLIER - SHOULD ADD THE SUPPLIER IN THE SUPLIER TABLE AND DISPLAY THE DETAILS OF THE NEW SUPPLIER ADDED.
ADDPRO-SHOULD ADD THE PRODUCT IN THE PRODUCT TABLE AND DISPLAY THE DETAILS OF THE NEW PRODUCT ADDED.
ADDCUST-SHOULD ADD THE CUSTOMER IN THE CUSTOMER TABLE AND DISPLAY THE DETAILS OF THE NEW CUSTOMER ADDED.
ADDORDER-SHOULD ADD THE ORDER IN THE ORDERS TABLE AND DISPLAY THE DETAILS OF THE ORDER. ORDER DATE SHOULD BE CURRENT DATE AND SHOULD COME AUTOMATICALLY.*/



USE INVENTORY

--CREATING A FUNCTION FOR AUTO GENERATION OF IDs--

CREATE FUNCTION CID(@C AS CHAR(1), @I AS INT)
RETURNS CHAR(5)
AS 
BEGIN
	DECLARE @ID AS CHAR(5);
	IF @I<10
		SET @ID = CONCAT (@C,'000',@I)
	ELSE IF @I<100
		SET @ID = CONCAT (@C,'00',@I)
	ELSE IF @I<1000
		SET @ID = CONCAT (@C,'0',@I)
	ELSE IF @I<10000
		SET @ID = CONCAT (@C,@I)
	ELSE 
		SET @ID = 'NA'; 
	RETURN @ID
END;
-----------------------------------------------

-- CREATING A PROCEDURE FOR ADDING SUPPLIERS
CREATE SEQUENCE S1
AS INT
START WITH 1
INCREMENT BY 1;

CREATE PROCEDURE ADDSUPPLIER(@NAME AS VARCHAR(20), @ADDRESS AS VARCHAR(30), @CITY AS VARCHAR(20),@PHONE AS VARCHAR(15), @EMAIL AS  VARCHAR(20))
AS
BEGIN
	DECLARE @ID AS CHAR(5);
	DECLARE @I AS INT;
	SET @I = (NEXT VALUE FOR S1);
	SET @ID = DBO.CID('S', @I);
	INSERT INTO SUPPLIER VALUES(@ID,@NAME,@ADDRESS,@CITY,@PHONE,@EMAIL);
	SELECT * FROM SUPPLIER 
  WHERE SID=@ID;
END;

-- CHECKING THE CREATED PROCEDURE
ADDSUPPLIER 'ALPHA ENTERPRISE','MAYUR VIHAR','DELHI','8738998473','AE@GMAIL.COM';

---------------------------------------------------

-- CREATING A PROCEDURE FOR ADDING PRODUCTS
CREATE SEQUENCE S2
AS INT
START WITH 1
INCREMENT BY 1;

CREATE PROCEDURE ADDPRODUCT(@PRODUCT AS VARCHAR(30),@PRICE MONEY,@CATEGORY VARCHAR(5),@SID CHAR(5))
AS
BEGIN
	DECLARE @I AS INT;
	DECLARE @ID AS CHAR(5);
	SET @I = NEXT VALUE FOR S2;
	SET @ID = DBO.CID('P',@I);
	SET NOCOUNT ON;
	INSERT INTO PRODUCT VALUES(@ID, @PRODUCT, @PRICE, @CATEGORY, @SID);
	SELECT * FROM PRODUCT;
END;

-- CHECKING THE CREATED PROCEDURES
ADDPRODUCT 'DELL MOUSE', '250', 'IT', 'S0001'

---------------------------------------------------

-- CREATING A PROCEDURE FOR ADDING CUSTOMERS

CREATE SEQUENCE S3
AS INT
START WITH 1
INCREMENT BY 1;

CREATE PROCEDURE ADDCUSTOMER(@NAME AS VARCHAR(20),@ADDRESS VARCHAR(40),@CITY AS VARCHAR(20),@PHONE AS VARCHAR(15),@EMAIL AS VARCHAR(20),@DOB AS DATE)
AS
BEGIN
	DECLARE @I AS INT;
	DECLARE @ID AS CHAR(5);
	SET @I = NEXT VALUE FOR S3;
	SET @ID = DBO.CID('C',@I);
	SET NOCOUNT ON;
	INSERT INTO CUST VALUES(@ID, @NAME, @ADDRESS, @CITY, @PHONE, @EMAIL,@DOB);
	SELECT * FROM CUSTOMER
  WHERE CID = @ID;
END;

-- CHECKING THE CREATED PROCEDURES
ADDCUSTOMER 'DEEPANKAR S','MACHA STREET','MUMBAI','8874372899','DEES@GMAIL.COM','1-JAN-1993';

---------------------------------------------------

-- CREATING A PROCEDURE FOR ADDING ORDERS
CREATE SEQUENCE S4
AS INT
START WITH 1
INCREMENT BY 1;

CREATE PROCEDURE ADDORDER(@PID AS CHAR(5),@CID CHAR(5),@QTY AS INT)
AS
BEGIN
	DECLARE @I AS INT;
	DECLARE @ID AS CHAR(5);
	SET @I = NEXT VALUE FOR S4;
	SET @ID = DBO.CID('O',@I);
	SET NOCOUNT ON;
	INSERT INTO ORDERS VALUES(@ID, GETDATE(), @PID, @CID, @QTY);
	SELECT * FROM ORDERS
  WHERE OID = @ID;;
END;

-- CHECKING THE CREATED PROCEDURES
ADDORDER 'P0005','C0002',50;





